{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const key = \"44916232-ab67e58f2cd7c4a8ed03790be\";\nconst url = \"https://pixabay.com/\";\n\naxios.defaults.baseURL = url;\n\nexport function getGallery({q=\"\", page = 1, per_page = 15}={}, loader) {\n  loader.style.display = \"block\"; \n    return axios\n    .get(\"api/\", {\n      params: {\n        key,\n        q,\n        page,\n        per_page,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n      },\n    }) \n      .then(({ data }) => data);   \n\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet lightbox;\n\nexport function renderCard(img, containerCard) {\n\n  const markup = img.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n      `<div class=\"card\">\n        <div class=\"card-img\">\n         <a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\"></a>\n        </div>\n        <div class=\"card-body\">\n         <ul class=\"card-list\">\n          <li class=\"card-item\"><span>Likes</span>${likes}</li>\n          <li class=\"card-item\"><span>Views</span>${views}</li>\n          <li class=\"card-item\"><span>Comments</span>${comments}</li>\n          <li class=\"card-item\"><span>Downloads</span>${downloads}</li>\n         </ul>\n       </div>\n      </div>`).join(\"\");\n  \n  \n  containerCard.insertAdjacentHTML(\"beforeend\", markup);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.card-img a', {\n        captions: true,\n        captionsData: \"alt\",\n        captionPosition: \"bottom\",\n        captionDelay: 250,\n    });\n  } else {\n    lightbox.refresh();\n  }      \n}\n ","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getGallery } from \"./js/pixabay-api\";\nimport { renderCard} from \"./js/render-functions\";\n\nconst params = {\n    q: \"\",\n    page: 1,\n    per_page: 15,\n    maxPage: 0,\n};\n\nconst form = document.querySelector(\".search-form\");\nconst containerCard = document.querySelector(\".card-container\");\nconst loader = document.querySelector(\".loader\");\nconst btnLoadMore = document.querySelector(\".load-button\");\n\nform.addEventListener(\"submit\", handlerSearch);\n\n\nasync function handlerSearch(evt) {\n  evt.preventDefault();\n  containerCard.innerHTML = '';\n  params.page = 1;\n  const form = evt.currentTarget;\n  params.q = form.elements.query.value.trim().toLowerCase();\n  \n  if (!params.q) {\n    form.reset();\n    return;\n  }\n\n  loader.style.display = \"block\";\n\n  try {\n    const { hits, totalHits } = await getGallery(params, loader);\n    \n    if (hits.length === 0) {\n      createError();\n      return;  \n    }  \n\n    params.maxPage = Math.ceil(totalHits / params.per_page);\n    renderCard(hits, containerCard); \n    \n    if (hits.length > 0 && hits.length !== totalHits) {\n      btnLoadMore.style.display = \"block\";\n      btnLoadMore.addEventListener(\"click\", handleLoadMore);\n    } else {\n      btnLoadMore.style.display = \"none\";\n    }\n  } catch (err) { \n    console.log(err.message); \n  } finally {\n    loader.style.display = \"none\";\n    form.reset();  \n  };\n}\n\n\n\nasync function handleLoadMore() {\n  params.page += 1;\n  btnLoadMore.style.display = \"none\";\n  loader.style.display = \"block\";\n  try {\n    const { hits } = await getGallery(params, loader);\n    renderCard(hits, containerCard);\n    smoothScroll();\n  } catch (err) {\n    console.log(err.message);\n  } finally {\n    loader.style.display = \"none\";\n    btnLoadMore.style.display = \"block\";\n\n    if (params.page === params.maxPage) {\n      btnLoadMore.style.display = \"none\";\n      btnLoadMore.removeEventListener(\"click\", handleLoadMore);\n      createInfo();\n    }\n  }\n}\n\n\nfunction createError() {\n  iziToast.error({\n    message: \"Sorry, there are no images matching your search query. Please try again!\",\n    messageColor: '#fff',\n    messageSize: '16px',\n    messageLineHeight: '1.5',\n    messageFontWeight: '400',\n    backgroundColor: '#ef4040',\n    close: true,\n    position: 'topRight',            \n    progressBarColor: '#b51b1b',\n   \n});\n}\n\n\nfunction createInfo() {\n  iziToast.info({\n    message: \"We're sorry, but you've reached the end of search results.\",\n    messageColor: '#fff',\n    messageSize: '16px',\n    messageLineHeight: '1.5',\n    messageFontWeight: '400',\n    backgroundColor: '#0099ff',\n    close: true,\n    position: 'topRight',            \n    progressBarColor: '#0071bd',\n   \n});\n}\n\n\nfunction smoothScroll() {\n    const galleryItem = document.querySelector('.card');\n        const itemHeight = galleryItem.getBoundingClientRect().height;\n        window.scrollBy({\n            top: itemHeight * 2,\n            left: 0,\n            behavior: 'smooth'\n        });\n}\n\n\n\n "],"names":["key","url","getGallery","q","page","per_page","loader","data","lightbox","renderCard","img","containerCard","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","params","form","btnLoadMore","handlerSearch","evt","hits","totalHits","createError","handleLoadMore","err","smoothScroll","createInfo","iziToast","itemHeight"],"mappings":"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"}